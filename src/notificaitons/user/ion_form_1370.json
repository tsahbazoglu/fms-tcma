
{
    "schemaVersion": "1.1.0",
    "key": "ion_form_1370",
    "form": "ion_form_1370",
    "name": "37 : Müşteri Şikayet Sayısı",
    "db": "iondb",
    "collection": "ion_form_1370",
    "type": "website",
    "menuOrder": 3700,
    "userConstantNote": "",
    "loginFkField": "member",
    "defaultCurrentQuery": "function x(e){if(!e.hasOwnProperty('member'))throw'member is resolved to null';return{member:e.member}}",
    "defaultHistoryQuery": "function x(e){if(!e.hasOwnProperty('member'))throw'member is resolved to null';return{member:e.member}}",
    "esignEmailBccRecipients": "tsahbazoglu@tspb.org.tr,aimamoglu@tspb.org.tr,ihim@tspb.org.tr",
    "esignEmailToRecipients": "function x(e){if(!e.hasOwnProperty('member'))throw'no member property on searchObject';if(!e.hasOwnProperty('tcno'))throw'e-imzalayan personelin 'email adres' tespiti için 'tcno' parametresi boş.';var n=db.getSisterDB('uysdb').common.findOne({_id:e.member});if(null==n)throw'no record regarding to search : '.concat(e.member);var r=n.email,i=db.getSisterDB('iondb').member_eimza_info.findOne({member:n._id,tcno:e.tcno,'status.code':'000'});return null==i&&(i=db.getSisterDB('iondb').member_eimza_info.findOne({member:n._id,tcno:NumberLong(e.tcno),'status.code':'000'})),null!=i&&(r+=',',r+=i.email),r}",
    "upperNodes": ["node_ion"],
    "accesscontrol": [
        "akuser",
        "ionadmin"
    ],
    "userConstantNoteList": [
        "KAS (CFD dahil) müşteri sayısı, ilgili 3 aylık dönemde işlem gerçekleştiren kaldıraçlı işlemler müşteri sayısını ifade eder.",
        "KAS (CFD dahil) müşteri şikayet sayısı (şikayete konu hesap sayısı) ile KAS (CFD dahil) müşteri sayısı alanlarına veri girişi yapıldıktan sonra “Kaydet” tuşuna basıldığında, “KAS (CFD dahil) müşteri şikayetlerinin (şikayete konu hesap sayısı) KAS (CFD dahil) müşteri sayısına göre oranı (%)” alanı otomatik hesaplanacaktır.",
        "Müşteri şikayet sayısı belirlenirken, ilgili dönemde müşterilerin şikayetçi oldukları hesap sayıları dikkate alınacaktır."
    ],
    "dimension": {
        "value": "page",
        "list": [
            {
                "roles": ["ionadmin", "ionviewer", "databankarchitect"],
                "value": "table"
            },
            {
                "roles": ["ionuser"],
                "value": "page"
            }
        ]
    },
    "actions": {
        "new": {
            "permit": ["ionuser"]
        },
        "save": {
            "permit": ["ionuser"]
        },
        "eimza1D": {
            "permit": ["ionuser", "architect"]
        },
        "eimza2D": {
            "shoot": false
        },
        "eimza": {
            "permit": ["ionuser", "ionviewer", "ionadmin", "architect"]
        }
    },
    "fields": [
        {
            "field": "member",
            "key": "member",
            "graphKey": "member",
            "reportOrder": 10,
            "order": 10,
            "reportRendered": true,
            "rendered": true,
            "roleCheck": true,
            "money": false,
            "readonly": false,
            "observable": false,
            "accesscontrol": "ionadmin,ionviewer,databankarchitect",
            "componentType": "selectOneMenu",
            "name": "Üye Kurum",
            "shortName": "Üye Kurum",
            "valueType": "java.lang.String",
            "converter": "SelectOneObjectIdConverter",
            "autoset": {
                "value": true,
                "list": [
                    {
                        "roles": null,
                        "value": true
                    },
                    {
                        "roles": ["uysadmin", "architect"],
                        "value": true
                    }

                ]
            },
            "items": {
                "db": "uysdb",
                "collection": "common",
                "itemTable": "common",
                "query": {
                    "forms": "member",
                    "ldapUID": {
                        "#in": [
                            "AK"
                        ]
                    }
                },
                "adminQuery": {
                    "forms": "member",
                    "memberType": {
                        "#in": [
                            "AK"
                        ]
                    }
                },
                "historyQuery": {
                    "forms": "member",
                    "memberType": {
                        "#in": [
                            "AK"
                        ]
                    }
                },
                "v": {
                    "ldapUID": {
                        "accesscontrol": "ionadmin,ionviewer,databankarchitect"
                    },
                    "name": 1
                },
                "sort": {
                    "ldapUID": 1
                },
                "labelStringFormat": "%6s | %s"
            }
        },
        {
            "key": "formName",
            "field": "formName",
            "order": 20,
            "reportOrder": 20,
            "componentType": "inputText",
            "name": "Bildirim Adı",
            "shortName": "Bildirim Adı",
            "money": false,
            "readonly": true,
            "observable": false,
            "roleCheck": true,
            "reportRendered": true,
            "rendered": true,
            "required": true,
            "converter": "TelmanStringConverter",
            "valueType": "java.lang.String",
            "accesscontrol": "ionuser,ionadmin,ionviewer,databankarchitect",
            "style": "text-align: left;font-weight : bold",
            "defaultValue": "37 : Müşteri Şikayet Sayısı",
            "width": 200
        },
        {
            "key": "description",
            "field": "description",
            "order": 30,
            "reportOrder": 30,
            "componentType": "inputTextarea",
            "name": "Açıklama",
            "shortName": "Açıklama",
            "money": false,
            "readonly": true,
            "observable": false,
            "roleCheck": true,
            "reportRendered": true,
            "rendered": true,
            "required": true,
            "converter": "TelmanStringConverter",
            "valueType": "java.lang.String",
            "accesscontrol": "ionuser,ionadmin,ionviewer,databankarchitect",
            "style": "text-align: right;",
            "db": "iondb",
            "forms": "ion_form_1370",
            "defaultValue": {
                "string-value": null,                
                "number-value": null,                
                "func-value": "function x(e,r){var m='Açıklama ...';if(0<=r.indexOf('ionadmin'))return m;if(0<=r.indexOf('spkuser'))return m;var n=db.getSisterDB('iondb'),o=db.getSisterDB('uysdb');if(!e.hasOwnProperty('member'))throw'searchObject does not have a member';if(!e.hasOwnProperty('forms'))throw'searchObject does not have a forms';var t,a=o.common.findOne({_id:e.member},{memberType:1});if(!a.hasOwnProperty('memberType')||null==a.memberType)throw'member does not have a memberType: '.concat(a.name);return null===a||null!==(t=n.formDescs.findOne({memberType:a.memberType,forms:e.forms}))&&(m=t.text),m}"
            },
            "width": 200
        },
        {
            "field": "year",
            "key": "year",
            "order": 40,
            "reportOrder": 40,
            "componentType": "selectOneMenu",
            "name": "Yıl",
            "shortName": "Yıl",
            "rendered": true,
            "roleCheck": true,
            "money": false,
            "readonly": false,
            "observable": false,
            "required": true,
            "accesscontrol": "uysuser,uysadmin,databankarchitect",
            "valueType": "java.lang.String",
            "converter": "SelectOneObjectIdConverter",
            "items": {
                "db": "iondb",
                "collection": "ion_form_year",
                "itemTable": "ion_form_year",
                "query": {

                },
                "historyQuery": {

                },
                "adminQuery": {

                },
                "v": {
                    "name": 1
                },
                "sort": {
                    "name": 1
                }
            },
            "reportRendered": true
        },
        {
            "field": "data_period",
            "key": "data_period",
            "order": 50,
            "reportOrder": 50,
            "componentType": "selectOneMenu",
            "name": "Dönem",
            "shortName": "Dönem",
            "rendered": true,
            "roleCheck": true,
            "money": false,
            "readonly": false,
            "observable": false,
            "required": true,
            "accesscontrol": "uysuser,uysadmin,databankarchitect",
            "valueType": "java.lang.String",
            "converter": "SelectOneObjectIdConverter",
            "items": {
                "db": "iondb",
                "collection": "ion_form_period",
                "itemTable": "ion_form_period",
                "query": {

                },
                "historyQuery": {

                },
                "adminQuery": {

                },
                "v": {
                    "name": 1
                },
                "sort": {
                    "orderno": 1
                }
            },
            "reportRendered": true
        },
        {
            "field": "customer_complain_count",
            "key": "customer_complain_count",
            "name": "KAS (CFD dahil) Müşteri Şikayet Sayısı (şikayete konu hesap sayısı)",
            "shortName": "KAS (CFD dahil) Müşteri Şikayet Sayısı (şikayete konu hesap sayısı)",
            "reportOrder": 60,
            "order": 60,
            "componentType": "inputText",
            "rendered": true,
            "money": false,
            "readonly": false,
            "required": true,
            "roleCheck": true,
            "converter": "NumberConverter",
            "valueType": "java.lang.Double",
            "converterInstance": "integer",
            "shouldCheckNegative": true,
            "minFractationDigits": 3,
            "maxFractationDigits": 3,
            "accesscontrol": "ionuser,ionadmin,ionviewer,databankarchitect",
            "style": "font-family:monospace;text-align:right;",
            "reportRendered": true
        },
        {
            "field": "customer_complain_ratio",
            "key": "customer_complain_ratio",
            "name": "KAS (CFD dahil) Müşteri Şikayetlerinin (şikayete konu hesap sayısı) KAS (CFD dahil) Müşteri Sayısına Göre Oranı (%)",
            "shortName": "KAS (CFD dahil) Müşteri Şikayetlerinin (şikayete konu hesap sayısı) KAS (CFD dahil) Müşteri Sayısına Göre Oranı (%)",
            "reportOrder": 70,
            "order": 70,
            "componentType": "inputText",
            "rendered": true,
            "money": false,
            "readonly": true,
            "required": true,
            "trequired": "false",
            "roleCheck": true,
            "converter": "JsFunctionConverter",
            "converterFormat": "##.###",
            "converterInstance": "number",
            "valueType": "java.lang.Double",
            "maxValue": 100,
            "shouldCheckNegative": true,
            "minFractationDigits": 3,
            "maxFractationDigits": 3,
            "accesscontrol": "ionuser,ionadmin,ionviewer,databankarchitect",
            "labelStyle": "background-color:yellow",
            "style": "",
            "calculated": true,
            "calculateOnListView": false,
            "calculateOnCrudView": false,
            "calculateOnPost": false,
            "calculateOnSave": true,
            "calculate": "function x(){var c=null==crudObject.customer_complain_count||isNaN(crudObject.customer_complain_count)?0:crudObject.customer_complain_count,u=null==crudObject.customer_complain_include_cfd_count||isNaN(crudObject.customer_complain_include_cfd_count)?0:crudObject.customer_complain_include_cfd_count;return 0==u?0:100*c/u}",
            "calculateOnClient": "function x(crudObject){crudObject=eval('('+crudObject+')');var x=null==crudObject.customer_complain_count||isNaN(crudObject.customer_complain_count)?0:crudObject.customer_complain_count,y=null==crudObject.customer_complain_include_cfd_count||isNaN(crudObject.customer_complain_include_cfd_count)?0:crudObject.customer_complain_include_cfd_count;return 0==y?0:100*x/y}",
            "calculateEngine": "clientSideJS",
            "reportRendered": true
        },
        {
            "field": "customer_resolved_complain_count",
            "key": "customer_resolved_complain_count",
            "name": "Bu Dönemde İntikal Eden Şikayetlerden Çözüme Kavuşanlar",
            "shortName": "Bu Dönemde İntikal Eden Şikayetlerden Çözüme Kavuşanlar",
            "reportOrder": 80,
            "order": 80,
            "componentType": "inputText",
            "rendered": true,
            "money": false,
            "readonly": false,
            "required": true,
            "roleCheck": true,
            "converter": "NumberConverter",
            "valueType": "java.lang.Double",
            "converterInstance": "integer",
            "shouldCheckNegative": true,
            "minFractationDigits": 3,
            "maxFractationDigits": 3,
            "accesscontrol": "ionuser,ionadmin,ionviewer,databankarchitect",
            "style": "font-family:monospace;text-align:right;",
            "reportRendered": true
        },
        {
            "field": "customer_proceeded_complain",
            "key": "customer_proceeded_complain",
            "name": "Bu Dönemde İntikal Eden Şikayetlerden Devam Edenler",
            "shortName": "Bu Dönemde İntikal Eden Şikayetlerden Devam Edenler",
            "reportOrder": 90,
            "order": 90,
            "componentType": "inputText",
            "rendered": true,
            "money": false,
            "readonly": false,
            "required": true,
            "roleCheck": true,
            "converter": "NumberConverter",
            "valueType": "java.lang.Double",
            "maxValue": 100,
            "shouldCheckNegative": true,
            "minFractationDigits": 3,
            "maxFractationDigits": 3,
            "accesscontrol": "ionuser,ionadmin,ionviewer,databankarchitect",
            "style": "font-family:monospace;text-align:right;",
            "reportRendered": true
        },
        {
            "field": "customer_complain_include_cfd_count",
            "key": "customer_complain_include_cfd_count",
            "name": "KAS (CFD dahil) Müşteri Sayısı (ilgili 3 aylık dönemde işlem gerçekleştirenler)",
            "shortName": "KAS (CFD dahil) Müşteri Sayısı (ilgili 3 aylık dönemde işlem gerçekleştirenler)",
            "reportOrder": 100,
            "order": 100,
            "componentType": "inputText",
            "rendered": true,
            "money": false,
            "readonly": false,
            "required": true,
            "roleCheck": true,
            "converter": "NumberConverter",
            "valueType": "java.lang.Double",
            "converterInstance": "integer",
            "shouldCheckNegative": true,
            "minFractationDigits": 3,
            "maxFractationDigits": 3,
            "accesscontrol": "ionuser,ionadmin,ionviewer,databankarchitect",
            "style": "font-family:monospace;text-align:right;",
            "reportRendered": true
        }
    ]
}
